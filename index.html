<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éâˆ ğ¤Œç’…èº°è•­é ©æ–‡è†¥ - ï¿½ç·’ï¿½åµ°ç³èŠ°ï¿½ï¿½</title>
    <style>
        ï¼šæ ¹ {
            /* ï¿½ç·’ï¿½åµ°ç³èŠ¾ğ §§è±Œè±†ï¿½ğ¡¶å„” */
            --bg-é¡è‰²ï¼š#f4f5f7ï¼› /* ç˜›ç®‡ï¿½å•–ï¿½å³•è‰¶ */
            --card-bg: #ffffff;
            --æ–‡æœ¬ä¸»ï¼š#5c5c5c; /* ç˜›æ¢ï¿½éŠœï¿½çƒ¾ï¿½äˆ‘ï¿½ä”¶ï¿½æµ¬é ­åƒï¿½é‚èå¨ªï¿½ï¿½ */
            --text-light: #949494;
            
            --ä¸»è¦ï¼š#7c99acï¼› /* ï¿½ğ§Š…ï¿½ä”¿ï¿½ï¿½ï¿½ */
            --primary-light: #dbe2e6;
            
            --æˆåŠŸï¼š#95b8a6ï¼› /* å•–ï¿½è¬ï¿½ (ï¿½ğ¤£°ï¿½ï¿½) */
            --success-bg: #eaf2ee;
            
            --å±éšªï¼š#d48c8cï¼› /* éŠ‹æ›„ğ¤…¡ç·’ï¿½æ›² (ï¿½ğ£ˆ²ï¿½æ‚) */
            --danger-bg: #f7e8e8;
            
            -- å£éŸ³ï¼š#e0cda7ï¼› /* ï¿½ï¿½é––æ¼¸æ†Ÿæ„ŸçŸ¥ï¿½ï¿½ (éœ…è¡€ ï¿½ï¿½/ï¿½ï¿½é¹å…§) */
            --accent-bg: #f9f5ed;
            
            --border-radius: 16px;
        }

        * {
            é‚Šè·ï¼š0ï¼›
            å…§é‚Šè·ï¼š0ï¼›
            box-sizing: border-box;
        }

        èº«é«” {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            æœ€å°é«˜åº¦ï¼š100vhï¼›
            å…§é‚Šè·ï¼š20pxï¼›
            é¡è‰²ï¼švar(--text-main);
            è¡Œé«˜ï¼š1.6ï¼›
        }

        ã€‚å®¹å™¨ {
            æœ€å¤§å¯¬åº¦ï¼š1000åƒç´ ï¼›
            margin: 0 auto;
            background: var(--card-bg);
            é‚Šç•ŒåŠå¾‘ï¼švar(--é‚Šç•ŒåŠå¾‘);
            å…§é‚Šè·ï¼š40pxï¼›
            ç›’å­é™°å½±ï¼š0 10px 30px rgba(0,0,0,0.05); /* ğ¥ªœï¿½å±¸è‹Šæ•¶ï¿½ */
        }

        h1 {
            æ–‡å­—å°é½Šæ–¹å¼ï¼šå±…ä¸­ï¼›
            é¡è‰²ï¼švar(--primary);
            margin-bottom: 10px;
            å­—é«”å¤§å°ï¼š2.2emï¼›
            å­—é«”ç²—ç´°ï¼š600ï¼›
            å­—æ¯é–“è·ï¼š1pxï¼›
        }

        .subtitle {
            æ–‡å­—å°é½Šæ–¹å¼ï¼šå±…ä¸­ï¼›
            é¡è‰²ï¼švar(--text-light);
            margin-bottom: 40px;
            å­—é«”å¤§å°ï¼š1emï¼›
        }

        ã€‚éƒ¨åˆ† {
            èƒŒæ™¯ï¼š#fafafaï¼›
            å…§é‚Šè·ï¼š30pxï¼›
            é‚Šç•ŒåŠå¾‘ï¼švar(--é‚Šç•ŒåŠå¾‘);
            margin-bottom: 30px;
            border: 1px solid #eeeeee;
        }

        .section-title {
            å­—é«”å¤§å°ï¼š1.2emï¼›
            é¡è‰²ï¼švar(--text-main);
            margin-bottom: 25px;
            é¡¯ç¤ºæ–¹å¼ï¼šflexï¼›
            align-items: center;
            é–“éš™ï¼š10pxï¼›
            å­—é«”ç²—ç´°ï¼š600ï¼›
        }

        .section-title::before {
            å…§å®¹ï¼š '';
            é¡¯ç¤ºï¼šå¡Šï¼›
            å¯¬åº¦ï¼š5åƒç´ ï¼›
            é«˜åº¦ï¼š20åƒç´ ï¼›
            background-color: var(--primary);
            åœ“è§’åŠå¾‘ï¼š10pxï¼›
        }

        .form-grid {
            é¡¯ç¤ºæ–¹å¼ï¼šç¶²æ ¼ï¼›
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            é–“éš™ï¼š20pxï¼›
            margin-bottom: 20px;
        }

        .input-group {
            é¡¯ç¤ºæ–¹å¼ï¼šflexï¼›
            å½æ›²æ–¹å‘ï¼šæŸ±ï¼›
        }

        æ¨™ç±¤ {
            å­—é«”ç²—ç´°ï¼š500ï¼›
            margin-bottom: 8px;
            é¡è‰²ï¼švar(--text-main);
            å­—é«”å¤§å°ï¼š0.9emï¼›
        }

        è¼¸å…¥æ¡†ã€é¸æ“‡æ¡†ã€æ–‡å­—å€åŸŸ {
            å…§é‚Šè·ï¼š12pxï¼›
            border: 1px solid #e0e0e0;
            åœ“è§’åŠå¾‘ï¼š10pxï¼›
            å­—é«”å¤§å°ï¼š1emï¼›
            èƒŒæ™¯è‰²ï¼š#fffï¼›
            é¡è‰²ï¼švar(--text-main);
            éæ¸¡ï¼šå…¨éƒ¨ 0.3 ç§’ï¼›
        }

        è¼¸å…¥:ç„¦é»{
            æ¦‚è¦ï¼šç„¡ï¼›
            é‚Šæ¡†é¡è‰²ï¼švar(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .btn {
            background: var(--primary);
            é¡è‰²ï¼šç™½è‰²ï¼›
            é‚Šæ¡†ï¼šç„¡ï¼›
            å…§é‚Šè·ï¼š12px 30pxï¼›
            åœ“è§’åŠå¾‘ï¼š50pxï¼›
            éŠæ¨™ï¼šæŒ‡é‡ï¼›
            å­—é«”å¤§å°ï¼š1emï¼›
            å­—é«”ç²—ç´°ï¼š500ï¼›
            éæ¸¡ï¼šå…¨éƒ¨ 0.3 ç§’ï¼›
            å­—æ¯é–“è·ï¼š0.5pxï¼›
        }

        .btn:hover {
            ä¸é€æ˜åº¦ï¼š0.9ï¼›
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(124, 153, 172, 0.3);
        }

        .btn-success {
            background: var(--success);
        }
        .btn-success:hover {
            box-shadow: 0 5px 15px rgba(149, 184, 166, 0.3);
        }

        .btn-danger {
            background: var(--danger);
            å…§é‚Šè·ï¼š6px 15pxï¼›
            å­—é«”å¤§å°ï¼š0.85emï¼›
        }
        .btn-danger:hover {
            box-shadow: 0 5px 15px rgba(212, 140, 140, 0.3);
        }

        .btn-small {
            å…§é‚Šè·ï¼š8px 20pxï¼›
            å­—é«”å¤§å°ï¼š0.9emï¼›
        }

        ã€‚å„€è¡¨æ¿ {
            é¡¯ç¤ºæ–¹å¼ï¼šç¶²æ ¼ï¼›
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            é–“éš™ï¼š20pxï¼›
            margin-bottom: 30px;
        }

        ã€‚å¡ç‰‡ {
            èƒŒæ™¯ï¼šç™½è‰²ï¼›
            å…§é‚Šè·ï¼š25px 15pxï¼›
            é‚Šç•ŒåŠå¾‘ï¼švar(--é‚Šç•ŒåŠå¾‘);
            æ–‡å­—å°é½Šæ–¹å¼ï¼šå±…ä¸­ï¼›
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
            border: 1px solid #f0f0f0;
            è½‰æ›ï¼šè®Šæ› 0.3 ç§’ï¼›
        }
        
        .card:hover {
            transform: translateY(-3px);
        }

        .card-label {
            å­—é«”å¤§å°ï¼š0.85emï¼›
            é¡è‰²ï¼švar(--text-light);
            margin-bottom: 8px;
            å­—æ¯é–“è·ï¼š1pxï¼›
        }

        .card-value {
            å­—é«”å¤§å°ï¼š1.5emï¼›
            å­—é«”ç²—ç´°ï¼š600ï¼›
            é¡è‰²ï¼švar(--text-main);
        }

        .card.income .card-value { color: var(--success); }
        .card.expense .card-value { color: var(--danger); }
        .card.warning .card-value { color: var(--accent); }
        
        /* ï¿½è¦æšºå¢§ï¿½ç¾“ï¿½ï¿½ã¨ƒï¿½ï¿½ï¿½è¦‹æ’˜ï¿½ */
        .card.clickable {
            éŠæ¨™ï¼šæŒ‡é‡ï¼›
            ä½ç½®ï¼šç›¸å°ï¼›
        }
        .card.clickable:active {
            è®Šæ›ï¼šç¸®æ”¾(0.98)ï¼›
        }
        .card.clickable::after {
            content: 'ï¿½ï¿½ï¿½æšºå¢§ï¿½ğ¦ œä°»ï¿½ï¿½åº•åº•ï¿½ï¿½';
            ä½ç½®ï¼šçµ•å°å®šä½ï¼›
            åº•éƒ¨ï¼š5pxï¼›
            å·¦å´ï¼š0ï¼›
            å¯¬åº¦ï¼š100%ï¼›
            å­—é«”å¤§å°ï¼š0.7emï¼›
            é¡è‰²ï¼š#dddï¼›
            ä¸é€æ˜åº¦ï¼š0ï¼›
            éæ¸¡ï¼šä¸é€æ˜åº¦ 0.3 ç§’ï¼›
        }
        .card.clickable:hover::after {
            ä¸é€æ˜åº¦ï¼š1ï¼›
        }

        .date-display {
            background: var(--accent-bg);
            å…§é‚Šè·ï¼š20pxï¼›
            é‚Šç•ŒåŠå¾‘ï¼švar(--é‚Šç•ŒåŠå¾‘);
            æ–‡å­—å°é½Šæ–¹å¼ï¼šå±…ä¸­ï¼›
            margin-bottom: 30px;
            é¡è‰²ï¼š#8c7b5dï¼›
        }

        .date-display h3 {
            å­—é«”å¤§å°ï¼š1emï¼›
            å­—é«”ç²—ç´°ï¼šæ­£å¸¸ï¼›
            margin-bottom: 5px;
        }

        .å€’æ•¸è¨ˆæ™‚{
            å­—é«”å¤§å°ï¼š1.4emï¼›
            å­—é«”ç²—ç´°ï¼šç²—é«”ï¼›
            é¡è‰²ï¼š#b59e72â€‹â€‹ï¼›
        }

        .progress-section {
            èƒŒæ™¯ï¼šç™½è‰²ï¼›
            å…§é‚Šè·ï¼š5pxï¼›
            é‚Šç•ŒåŠå¾‘ï¼švar(--é‚Šç•ŒåŠå¾‘);
            margin-bottom: 30px;
        }

        .progress-bar-container {
            èƒŒæ™¯è‰²ï¼š#f0f0f0ï¼›
            é«˜åº¦ï¼š20åƒç´ ï¼›
            åœ“è§’åŠå¾‘ï¼š10pxï¼›
            æº¢å‡ºï¼šéš±è—ï¼›
            ä½ç½®ï¼šç›¸å°ï¼›
        }

        .progress-bar {
            é«˜åº¦ï¼š100%ï¼›
            èƒŒæ™¯ï¼švarï¼ˆ--æˆåŠŸï¼‰ï¼› /* ï¿½ç·’ï¿½åµ°ç³èŠ°ï¿½ï¿½ */
            åœ“è§’åŠå¾‘ï¼š10pxï¼›
            transition: width 0.8s ease;
        }

        .transaction-form {
            èƒŒæ™¯ï¼šç™½è‰²ï¼›
            å…§é‚Šè·ï¼š25pxï¼›
            é‚Šç•ŒåŠå¾‘ï¼švar(--é‚Šç•ŒåŠå¾‘);
            margin-bottom: 25px;
            border: 1px dashed #d1d5db;
        }

        .radio-group {
            é¡¯ç¤ºæ–¹å¼ï¼šflexï¼›
            é–“éš™ï¼š20pxï¼›
            margin-bottom: 20px;
            justify-content: center;
        }

        .radio-label {
            é¡¯ç¤ºæ–¹å¼ï¼šflexï¼›
            align-items: center;
            é–“éš™ï¼š8åƒç´ ï¼›
            éŠæ¨™ï¼šæŒ‡é‡ï¼›
            å…§é‚Šè·ï¼š8px 20pxï¼›
            åœ“è§’åŠå¾‘ï¼š20pxï¼›
            éæ¸¡ï¼šå…¨éƒ¨ 0.2 ç§’ï¼›
            border: 1px solid transparent;
        }
        
        .radio-label:hover {
            èƒŒæ™¯ï¼š#f5f5f5ï¼›
        }

        /* ï¿½äŒŠæ‘°ğ¡¶å„” é›»å° */
        è¼¸å…¥[type="radio"] {
            å¼·èª¿è‰²ï¼švar(--primary);
        }

        .transaction-list {
            èƒŒæ™¯ï¼šç™½è‰²ï¼›
            é‚Šç•ŒåŠå¾‘ï¼švar(--é‚Šç•ŒåŠå¾‘);
            æº¢å‡ºï¼šéš±è—ï¼›
            box-shadow: 0 4px 20px rgba(0,0,0,0.02);
        }

        .transaction-header {
            é¡¯ç¤ºæ–¹å¼ï¼šç¶²æ ¼ï¼›
            ç¶²æ ¼æ¨¡æ¿åˆ—ï¼š80px 140px 1fr 100px 70pxï¼› /* æ†“ğ§¼®ï¿½ä­¾ï¿½ï¿½ï¿½ğ¤˜ªï¿½é›¿æ»¾ç¥æ‘¨ï¿½ */
            é–“éš™ï¼š15pxï¼›
            å…§é‚Šè·ï¼š15px 20pxï¼›
            èƒŒæ™¯ï¼š#fafafaï¼›
            é¡è‰²ï¼švar(--text-light);
            å­—é«”å¤§å°ï¼š0.85emï¼›
            border-bottom: 1px solid #f0f0f0;
        }

        .transaction-item {
            é¡¯ç¤ºæ–¹å¼ï¼šç¶²æ ¼ï¼›
            grid-template-columns: 80px 140px 1fr 100px 70px;
            é–“éš™ï¼š15pxï¼›
            å…§é‚Šè·ï¼š15px 20pxï¼›
            border-bottom: 1px solid #f9f9f9;
            align-items: center;
            éæ¸¡ï¼šèƒŒæ™¯ 0.2 ç§’ï¼›
        }

        .transaction-item:hover {
            èƒŒæ™¯ï¼š#fcfcfcï¼›
        }

        .transaction-type {
            å…§é‚Šè·ï¼š4px 10pxï¼›
            åœ“è§’åŠå¾‘ï¼š6pxï¼›
            å­—é«”å¤§å°ï¼š0.8emï¼›
            æ–‡å­—å°é½Šæ–¹å¼ï¼šå±…ä¸­ï¼›
        }

        .type-come {
            èƒŒæ™¯ï¼švar(--success-bg);
            é¡è‰²ï¼š#6b8c7cï¼›
        }

        .type-expense {
            background: var(--danger-bg);
            é¡è‰²ï¼š#b57b7bï¼›
        }
        
        .transaction-date {
            å­—é«”å¤§å°ï¼š0.85emï¼›
            é¡è‰²ï¼švar(--text-light);
            é¡¯ç¤ºæ–¹å¼ï¼šflexï¼›
            å½æ›²æ–¹å‘ï¼šæŸ±ï¼›
            è¡Œé«˜ï¼š1.2ï¼›
        }
        
        .transaction-date span.time {
            å­—é«”å¤§å°ï¼š0.9emï¼›
            é¡è‰²ï¼š#b0b0b0ï¼›
        }

        .transaction-reason {
            é¡è‰²ï¼švar(--text-main);
            å­—é«”å¤§å°ï¼š0.95emï¼›
        }

        .transaction-amount {
            å­—é«”ç²—ç´°ï¼š600ï¼›
            æ–‡å­—å°é½Šæ–¹å¼ï¼šå³å°é½Šï¼›
        }

        .amount-income { color: var(--success); }
        .amount-expense { color: var(--danger); }

        .method-item {
            é¡¯ç¤ºæ–¹å¼ï¼šflexï¼›
            align-items: center;
            justify-content: ç©ºæ ¼;
            å…§é‚Šè·ï¼š15pxï¼›
            èƒŒæ™¯ï¼šç™½è‰²ï¼›
            margin-bottom: 10px;
            åœ“è§’åŠå¾‘ï¼š12pxï¼›
            border: 1px solid #f0f0f0;
            éæ¸¡ï¼šå…¨éƒ¨ 0.3 ç§’ï¼›
        }

        .method-item.completed {
            èƒŒæ™¯è‰²ï¼š#f9f9f9ï¼›
            ä¸é€æ˜åº¦ï¼š0.7ï¼›
        }

        .method-item.completed .method-text {
            text-decoration: åˆªé™¤ç·š;
            é¡è‰²ï¼švar(--text-light);
        }
        
        /* ï¿½ğ£³½ï¿½ï¿½åŒ§ï¿½è¨¥çŸ½ï¿½ãŸ² */
        @media (max-width: 768px) {
            .container { padding: 20px; }
            .transaction-header { é¡¯ç¤ºï¼šç„¡ï¼› } /* ï¿½ï¿½ğ§¢²ï¿½æ–ƒï¿½ï¿½é»¸ï¿½ï¿½ğ¤©ºï¿½ä ·ï¿½ï¿½ */
            .transaction-item {
                grid-template-columns: 1fr 100px;
                grid-template-rows: auto auto auto;
                é–“éš™ï¼š5åƒç´ ï¼›
                å…§é‚Šè·ï¼š15pxï¼›
            }
            .transaction-type { grid-column: 1; width: fit-content; margin-bottom: 5px;}
            .transaction-date { grid-column: 2; text-align: right; grid-row: 1; }
            .transaction-reason { grid-column: 1 / -1; font-weight: 500; margin: 5px 0;}
            .transaction-amount { grid-column: 1; text-align: left; font-size: 1.1em;}
            .transaction-actions { grid-column: 2; text-align: right; }
        }

        .æ…¶ç¥{
            ä½ç½®ï¼šå›ºå®šï¼›
            å‰50%ï¼›
            å·¦å´ï¼š50%ï¼›
            è®Šæ›ï¼šå¹³ç§»(-50%, -50%)ï¼›
            èƒŒæ™¯ï¼šç™½è‰²ï¼›
            å…§é‚Šè·ï¼š40pxï¼›
            åœ“è§’åŠå¾‘ï¼š20pxï¼›
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            æ–‡å­—å°é½Šæ–¹å¼ï¼šå±…ä¸­ï¼›
            é¡¯ç¤ºï¼šç„¡ï¼›
            z-indexï¼š1000ï¼›
            border: 2px solid var(--success);
        }

        .overlay {
            ä½ç½®ï¼šå›ºå®šï¼›
            é ‚éƒ¨ï¼š0ï¼›
            å·¦å´ï¼š0ï¼›
            å¯¬åº¦ï¼š100%ï¼›
            é«˜åº¦ï¼š100%ï¼›
            èƒŒæ™¯è‰²ï¼šrgba(255,255,255,0.8);
            èƒŒæ™¯æ¿¾é¡ï¼šæ¨¡ç³Š(2px)ï¼›
            é¡¯ç¤ºï¼šç„¡ï¼›
            z-indexï¼š999ï¼›
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ï¿½ï¿½ã´“ï¿½ï¿½éâˆ ğ¤Œç’…èº°è•­é ©ï¿½</h1>
        <p class="subtitle">ï¿½èŠ·ï¿½ï¿½ğ§‘é–®ã—›ï¿½ç˜¥è­ï¿½è‘ï¿½ï¿½ï¿½ï¿½æš‘åš—å³•ï¿½ä¹™ä¹™ğ¤Œç’…å”ï¿½æ¼¤ï¿½ï¿½</p>
        
        <div class="section">
            <h2 class="section-title">ï¿½ï¿½ï¿½ï¿½ ï¿½ğ¤Œç’…èº°èº«æ‘°ï¿½</h2>
            <div class="form-grid">
                <div class="input-group">
                    <label>ï¿½ğ¤Œç’…å”ï¿½æ¿±è¿‚è¿´</label>
                    <input type="text" id="goalName" placeholder="é˜è¦‹ï¿½åš—ğ¡œï¿½åŸˆï¿½ğ£‚·ï¿½ğ§¢²ï¿½ï¿½ï¿½èšç Œï¿½ç¢åœ’ï¿½ï¿½">
                </div>
                <div class="input-group">
                    <label>ï¿½ğ¤Œç’…ä ·ï¿½ç…¾ï¿½ï¿½ (NT$)</label>
                    <input type="number" id="targetAmount" placeholder="100000">
                </div>
                <div class="input-group">
                    <label>ï¿½ğ¤Œç’…è¹±ğ ¯«ï¿½ï¿½ï¿½</label>
                    <input type="date" id="targetDate">
                </div>
                <div class="input-group">
                    <label>ç‘•ç–µï¿½é’…ï¿½ç…¾ï¿½ï¿½ (NT$)</label>
                    <input type="number" id="initialAmount" placeholder="0" value="0">
                </div>
            </div>
            <div style="text-align: center;">
                <button class="btn" onclick="saveGoal()">ï¿½å”‡ï¿½ä…èº«æ‘°ï¿½</button>
            </div>
        </div>

        <div class="date-display" id="dateDisplay" style="display: none;">
            <h3>ï¿½è±é ğ£ª§ï¿½ğ¤Œç’…è¹±ğ ¯«ï¿½ï¿½ç½°ï¿½ï¿½ï¿½ï¿½ï¿½</h3>
            <div class="countdown" id="countdownText">é–®ğ¦¯€è‘‰...</div>
        </div>

        <div class="progress-section" id="progressSection" style="display: none;">
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
        </div>

        <div class="dashboard" id="dashboard" style="display: none;">
            <div class="card">
                <div class="card-label">ï¿½ğ¤Œï¿½ï¿½æ¿±èœ‡æ†¿ï¿½</div>
                <div class="card-value" id="totalAmount">æ–°å°å¹£ 0 å…ƒ</div>
            </div>
            <div class="card income">
                <div class="card-label">èèˆªğ¤£°ï¿½ï¿½</div>
                <div class="card-value positive" id="totalIncome">NT$ 0</div>
            </div>
            <div class="ä¿¡ç”¨å¡æ”¯å‡º">
                <div class="card-label">èèˆªğ£ˆ²ï¿½æ‚</div>
                <div class="card-value negative" id="totalExpense">æ–°å°å¹£ 0</div>
            </div>
            <div class="card warning">
                <div class="card-label">ï¿½ï¿½æ’ŒÎ¦ï¿½ç…¾ï¿½ï¿½</div>
                <div class="card-value" id="remainingAmount">æ–°å°å¹£ 0 å…ƒ</div>
            </div>
            <div class="card">
                <div class="card-label">ç˜¥ğ¤©ºğ ¯«ï¿½ï¿½æ‘®ï¿½</div>
                <div class="card-value" id="dailyNeed">æ–°å°å¹£ 0</div>
            </div>
            <div class="card clickable" onclick="toggleProgressDetail()" title="æšºå¢§ï¿½ğ °´ï¿½ï¿½ï¿½ğ¤¤¿ç§»èœ‰è£ç®">
                <div class="card-label">æ‘°å³•ï¿½é¾ï¿½å”‡æ¼²</div>
                <div class="card-value" id="progressPercent">0%</div>
            </div>
        </div>

        <div class="section" id="transactionSection" style="display: none;">
            <h2 class="section-title">ï¿½ï¿½å…›ï¿½ğ¤£°ï¿½ğ£ˆ²é–®ã—›ï¿½</h2>
            
            <div class="transaction-form">
                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="transType" value="income" checked>
                        <span>ï¿½ğ¤£°ï¿½ï¿½ (+)</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="transType" value="expense">
                        <span>ï¿½ğ£ˆ²ï¿½æ‚(-)</span>
                    </label>
                </div>
                <div class="form-grid">
                    <div class="input-group">
                        <label>æ–°å°å¹£ (NT$)</label>
                        <input type="number" id="transAmount" placeholder="1000">
                    </div>
                    <div class="input-group">
                        <label>ï¿½ğŸ‘¿</label>
                        <input type="date" id="transDate">
                    </div>
                    <div class="input-group">
                        <label>ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½</label>
                        <input type="time" id="transTime">
                    </div>
                    <div class="input-group" style="grid-column: 1 / -1;">
                        <label>ï¿½ï¿½ï¿½çœ / éš¤èŠ£ï¿½ï¿½</label>
                        <input type="text" id="transReason" placeholder="é˜è¦‹ï¿½åš—æœŸğ¢ç™†å‰é‹’ï¿½ï¿½ï¿½ï¿½ğ¡»ï¿½åƒï¿½ï¿½éç‘Ÿã®¾...">
                    </div>
                </div>
                <div style="text-align: right;">
                    <button class="btn btn-success" onclick="addTransaction()">ï¿½é°µæ†“å™¼ï¿½ã—›ï¿½</button>
                </div>
            </div>

            <div class="transaction-list">
                <div class="transaction-header">
                    <div>æ†¿ğ§¼®ï¿½ï¿½</div>
                    <div>ï¿½ğ ¯«ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½</div>
                    <div>ï¿½ï¿½ï¿½ï¿½çœ / éš¤èŠ£ï¿½ï¿½</div>
                    <div style="text-align: right">ï¿½ï¿½ç…¾ï¿½ï¿½</div>
                    <div style="text-align: center">ï¿½ï¿½ç€…ï¿½ï¿½</div>
                </div>
                <div id="transactionList">
                    <div style="padding: 40px; text-align: center; color: #999;">æ’ ğ¡¶ï¿½âˆ©æ¼±ï¿½ï¿½æ ï¿½ã—›ï¿½</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">ï¿½ï¿½ï¿½ï¿½ï¿½ğ œ±ï¿½ï¿½ğ¤¤¿ï¿½é–®ï¿½</h2>
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <input type="text" id="newMethod" placeholder="é˜è¦‹ï¿½åš—ğ¡ï¿½èª©äºˆæ’ ç©ƒï¿½é¶¯ï¿½ï¿½ğ¡Ÿµæ†Œè„«ï¿½ï¿½..." style="flex:1;">
                <button class="btn btn-small" onclick="addMethod()">ï¿½é°µæ†“ï¿½</button>
            </div>
            <ul style="list-style: none;" id="methodList"></ul>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="closeCelebration()"></div>
    <div class="celebration" id="celebration">
        <div style="font-size: 3em; margin-bottom: 10px;">ï¿½ï¿½ï¿½ï¿½</div>
        <h2 style="color: var(--success); margin-bottom: 10px;">ï¿½å‰–ï¿½ğ£ˆ¯ï¿½å¨ï¿½é¹ğ¤Œç’…è½·ï¿½</h2>
        <p style="color: var(--text-main); margin-bottom: 10px;">æ†’å–Ÿï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½åŠï¿½ï¿½ï¿½ğ§¼®ğ¥¼š</p>
        <p style="color: var(--primary); font-size: 1.2em; font-weight: bold;" id="celebrationAmount"></p>
        <button class="btn" onclick="closeCelebration()" style="margin-top: 20px;">æ†­èŠ£ï¿½é›´ï¿½åš—ï¿½</button>
    </div>

    <script>
        let appData = {
            ç›®æ¨™ï¼š {
                å§“åï¼š ''ï¼Œ
                targetAmount: 0,
                targetDate: '',
                åˆå§‹é‡‘é¡ï¼š0
            },
            äº¤æ˜“ï¼š[]ï¼Œ
            æ–¹æ³•ï¼š []
        };
        
        è®“ showPreciseProgress = false; // ï¿½ç¹¡ï¿½ï¿½ï¿½ç³“ï¿½ç‚æ†¿èˆå…§è æ›„â…¡ï¿½åƒï¿½ï¿½ç˜¥ï¿½

        // ï¿½ï¿½å˜¥ï¿½è¦‹ï¿½ğ¡—ğ ¯«ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
        document.getElementById('targetDate').valueAsDate = new Date(Date.now() + 180 * 24 * 60 * 60 * 1000);
        
        // é–®å‰–ï¿½å¸‹ï¿½ğ °´äºˆï¿½ï¿½ï¿½ğ ¯«è ˜ï¿½ï¿½ğ£¶¹ï¿½éŠï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
        const now = new Date();
        document.getElementById('transDate').valueAsDate = now;
        document.getElementById('transTime').value = now.toTimeString().slice(0, 5); // HH:mm æ ¼å¼

        function saveGoal() {
            const name = document.getElementById('goalName').value || 'ï¿½ï¿½ğ¤‘³ï¿½ï¿½ï¿½éâˆ ğ¤Œç’…ï¿½';
            const target = parseFloat(document.getElementById('targetAmount').value) || 0;
            const initial = parseFloat(document.getElementById('initialAmount').value) || 0;
            const date = document.getElementById('targetDate').value;

            å¦‚æœï¼ˆç›®æ¨™ <= 0ï¼‰{
                alert('éš¢è²æŸ”æ€§ï¿½äº¤ï¿½ã—‡ï¿½ï¿½ï¿½ï¿½ğ¤Œç’…ä ·ï¿½ç…¾ï¿½ãµªï¿½');
                è¿”å›;
            }

            appData.goal = { name, targetAmount: target, targetDate: date, initialAmount: initial };
            
            // å“„å“„å˜¥ï¿½é’…ï¿½ç…¾ï¿½ï¿½
            å¦‚æœï¼ˆåˆå§‹å€¼ > 0ï¼‰{
                // ç‘¼Xä°»ï¿½ç³“ï¿½ç‚æ’Œä¿®ï¿½ğ¤˜ªï¿½åŒ§ï¿½å˜¥ï¿½è¦¿æ¼±ï¿½ï¿½æ©’ï¿½è«¹ğ¥…¾ï¿½âˆªï¿½ï¿½é°µæ†“ï¿½
                const hasInitial = appData.transactions.some(t => t.reason === 'ï¿½ï¿½å˜¥ï¿½é’…ï¿½ç…¾ï¿½ï¿½');
                å¦‚æœ (!hasInitial) {
                    appData.transactions.push({
                        id: Date.now(),
                        é¡å‹ï¼š'æ”¶å…¥'
                        é‡‘é¡ï¼šåˆå§‹å€¼ï¼Œ
                        æ—¥æœŸ: new Date().toISOString().split('T')[0],
                        æ™‚é–“ï¼š'00:00'
                        åŸå› ï¼š'å˜¥ï¿½é’…ï¿½ç…¾ï¿½'
                    });
                }
            }

            updateAll();
            å„²å­˜åˆ°å„²å­˜();
        }

        function addTransaction() {
            const type = document.querySelector('input[name="transType"]:checked').value;
            const amount = parseFloat(document.getElementById('transAmount').value);
            const date = document.getElementById('transDate').value;
            const time = document.getElementById('transTime').value; // ï¿½ã¬¢ï¿½ï¿½ğ¡—ï¿½ï¿½ï¿½ï¿½
            const reason = document.getElementById('transReason').value.trim();

            å¦‚æœ (!amount || amount <= 0) {
                alert('éš¢è²æŸ”æ€§ï¿½äº¤ï¿½ã—‡ï¿½ï¿½ï¿½ç…¾ï¿½ãµªï¿½');
                è¿”å›;
            }
            å¦‚æœ (!reason) {
                alert('éš¢è²æŸ”æ€§ï¿½äº¦ï¿½ï¿½çœï¿½ï¿½ğ¤¥ç‰§ï¿½ï¿½ğ ¬ï¿½');
                è¿”å›;
            }

            appData.transactions.push({
                id: Date.now(),
                é¡å‹ï¼Œ
                æ•¸é‡ï¼Œ
                æ—¥æœŸï¼Œ
                æ™‚é–“ï¼š æ™‚é–“|| '00:00', // å”‡ï¿½ä€¹ï¿½ï¿½ï¿½æ©’ï¿½è«¹ğ¥…¾ï¿½âˆªï¿½ï¿½ï¿½é±èº«
                åŸå› 
            });

            // æ¿±è”­å¤§é“éŠµå…¸é±“ï¿½ç®‡ğ£¶¹ï¿½éŠï¿½ï¿½ï¿½ï¿½ï¿½
            document.getElementById('transAmount').value = '';
            document.getElementById('transReason').value = '';
            const currentNow = new Date();
            document.getElementById('transDate').valueAsDate = currentNow;
            document.getElementById('transTime').value = currentNow.toTimeString().slice(0, 5);

            updateAll();
            å„²å­˜åˆ°å„²å­˜();

            const currentTotal = calculateTotal();
            å¦‚æœ (currentTotal >= appData.goal.targetAmount && appData.goal.targetAmount > 0) {
                é¡¯ç¤ºæ…¶ç¥æ´»å‹•(ç•¶å‰ç¸½æ•¸)ï¼›
            }
        }

        function deleteTransaction(id) {
            if (confirm('
                appData.transactions = appData.transactions.filter(t => t.id !== id);
                updateAll();
                å„²å­˜åˆ°å„²å­˜();
            }
        }

        å‡½æ•¸ calculateTotal() {
            ä»¤ç¸½æ•¸ = 0ï¼›
            appData.transactions.forEach(t => {
                å¦‚æœ (t.type === 'income') total += t.amount;
                å¦å‰‡ï¼Œç¸½è¨ˆ -= t.amountï¼›
            });
            è¿”å›ç¸½é¡ï¼›
        }
        
        // ï¿½ï¿½ï¿½ï¿½å¦ï¿½å”‡æ¼²æ†¿èˆå…§ç’…âˆªï¿½ï¿½
        function toggleProgressDetail() {
            showPreciseProgress = !showPreciseProgress;
            æ›´æ–°å…¨éƒ¨ï¼ˆï¼‰ï¼› // ï¿½ï¿½é½’é°µçš“è„«ï¿½ã®–ï¿½é’…ğ¢’°
        }

        function updateAll() {
            å¦‚æœ (!appData.goal.targetAmount) å›å‚³;

            const total = calculateTotal();
            const target = appData.goal.targetAmount;
            const remaining = Math.max(0, target - total);
            
            // é–®ï¿½ï¿½ã›–åƒï¿½ï¿½ç˜¥ï¿½
            const rawPercent = (total / target) * 100;
            let percentDisplay;
            
            å¦‚æœ (é¡¯ç¤ºç²¾ç¢ºé€²åº¦) {
                // è æ›„â…¡ç’…âˆªï¿½ğ§¶ï¿½ğ¡œï¿½ğ¤©ºå½æšºğ§¼®ï¿½ï¿½ï¿½æ‹ï¿½ï¿½
                percentDisplay = rawPercent.toFixed(2) + '%';
            } åˆ¥çš„ {
                // âˆªï¿½ğ§¶ï¿½ğ¡ãŸ²ï¿½å½åš—å³•ï¿½æ†­æ‰¾ï¿½ç˜ï¿½ï¿½ï¿½ 100% (ï¿½è†„ï¿½ï¿½ä‚¿ï¿½æ¯ºï¿½é ï¿½ï¿½ï¿½)
                percentDisplay = Math.min(100, Math.round(rawPercent)) + '%';
                å¦‚æœ (rawPercent > 100) percentDisplay = Math.round(rawPercent) + '%';
            }

            const today = new Date();
            const targetDate = new Date(appData.goal.targetDate);
            const diffTime = targetDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            document.getElementById('dateDisplay').style.display = 'block';
            const countdownText = diffDays > 0
                ï¼Ÿ `${diffDays} æ†­æŠ¬ï¿½ï¿½${targetDate.toLocaleDateString('zh-TW')}åš—é ­
                diffDays === 0
                    ï¼Ÿ 'æ’ æœ›ç³“éšğ °´äºˆåš—ï¿½'
                    : `æ’Œè„¤ï¿½èˆ‰ï¿½ï¿½ ${Math.abs(diffDays)} æ†­å¥ˆ;
            document.getElementById('countdownText').textContent = countdownText;

            document.getElementById('dashboard').style.display = 'grid';
            document.getElementById('totalAmount').textContent = `NT$ ${total.toLocaleString()}`;
            document.getElementById('remainingAmount').textContent = `NT$ ${remaining.toLocaleString()}`;
            
            // ï¿½å‡’ï¿½é°µï¿½å”‡æ¼²æ†¿èˆå…§
            document.getElementById('progressPercent').textContent = percentDisplay;

            const dailyNeed = diffDays > 0 ? Math.ceil(remaining / diffDays) : 0;
            document.getElementById('dailyNeed').textContent = diffDays > 0 ï¼Ÿ `NT$ ${dailyNeed.toLocaleString()}` : '-';

            document.getElementById('progressSection').style.display = 'block';
            // ï¿½å”‡æ¼²ç’‡æ¡‘ğ©‘ˆæ‘¨èŸ²ï¿½ğ¢ ƒï¿½é¾ï¿½ç¡‹ï¿½ğ¡œéŠ 100% éšäº™ï¿½ç˜ï¿½ğ¤‘³ï¿½ï¿½
            document.getElementById('progressBar').style.width = Math.min(100, Math.max(0, rawPercent)) + '%';

            let totalIncome = 0, totalExpense = 0;
            appData.transactions.forEach(t => {
                å¦‚æœ (t.type === 'income') totalIncome += t.amount;
                å¦å‰‡ totalExpense += t.amount;
            });

            document.getElementById('totalIncome').textContent = `NT$ ${totalIncome.toLocaleString()}`;
            document.getElementById('totalExpense').textContent = `NT$ ${totalExpense.toLocaleString()}`;

            renderTransactions();
            document.getElementById('transactionSection').style.display = 'block';
        }

        function renderTransactions() {
            const list = document.getElementById('transactionList');
            
            å¦‚æœ (appData.transactions.length === 0) {
                list.innerHTML = '<div style="padding: 40px; text-align: center; color: #999;">æ’ ğ¡¶ï¿½âˆ©æ¼±æ«ï¿½ã—›ï¿½</div>';
                è¿”å›;
            }

            // ï¿½ï¿½ï¿½ï¿½ï¿½èª¯ï¿½ï¿½è¨¥æ‘©åš—ğ¡ğ ¯«ï¿½ï¿½ï¿½ï¿½ + ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ (ï¿½é°µï¿½ï¿½ï¿½ï¿½ï¿½)
            const sorted = [...appData.transactions].sort((a, b) => {
                // è¯ï¿½ï¿½ï¿½ï¿½ğ ¯«ï¿½ï¿½è ˜ï¿½ï¿½ï¿½ï¿½ï¿½æï¿½ğ¦¯€è‘¡è„ç‰™ï¿½è„°ï¿½å³•ï¿½ç£°ï¿½
                const timeA = a.time || '00:00';
                const timeB = b.time || '00:00';
                const dateA = new Date(`${a.date}T${timeA}`);
                const dateB = new Date(`${b.date}T${timeB}`);
                è¿”å› dateB - dateAï¼›
            });

            list.innerHTML = sorted.map(t => {
                const timeStr = t.time ? `<span class="time">${t.time}</span>` : '';
                å›å‚³`
                <div class="transaction-item">
                    <div class="transaction-type ${t.type === 'income' ? 'type-inâ€‹â€‹come' : 'type-expense'}">
                        ${t.type === 'æ”¶å…¥' ? 'ğ¤£°ï¿½ï¿½' : 'ğ£ˆ²ï¿½æ‚'}
                    </div>
                    <div class="transaction-date">
                        ${t.date}
                        ${timeStr}
                    </div>
                    <div class="transaction-reason">${t.reason}</div>
                    <div class="transaction-amount ${t.type === 'income' ? 'amount-income' : 'amount-expense'}">
                        ${t.type === 'income' ? '+' : '-'} ${t.amount.toLocaleString()}
                    </div>
                    <div class="transaction-actions" style="text-align: center;">
                        <button class="btn btn-danger" onclick="deleteTransaction(${t.id})">ï¿½ï¿½</button>
                    </div>
                </div>
            `}).join('');
        }

        function addMethod() {
            const input = document.getElementById('newMethod');
            const text = input.value.trim();
            å¦‚æœ (!text) è¿”å›ï¼›

            appData.methods.push({
                id: Date.now(),
                æ–‡å­—,
                å·²å®Œæˆï¼šå¦
            });
            input.value = '';
            renderMethods();
            å„²å­˜åˆ°å„²å­˜();
        }

        function toggleMethod(id) {
            const method = appData.methods.find(m => m.id === id);
            å¦‚æœï¼ˆæ–¹æ³•ï¼‰{
                method.completed = !method.completed;
                renderMethods();
                å„²å­˜åˆ°å„²å­˜();
            }
        }

        function deleteMethod(id) {
            appData.methods = appData.methods.filter(m => m.id !== id);
            renderMethods();
            å„²å­˜åˆ°å„²å­˜();
        }

        function renderMethods() {
            const list = document.getElementById('methodList');
            å¦‚æœ (appData.methods.length === 0) {
                list.innerHTML = '<li style="text-align:center; color:#ccc; padding:10px;">æ’ ğ¡ğ§Š‹ï¿½é°µæ†“ç¡ºé™é›¿é–™ä²®ç˜œï¿½</li>';
                è¿”å›;
            }

            list.innerHTML = appData.methods.map(m => `
                <li class="method-item ${m.completed ? 'completed' : ''}">
                    <label style="display:flex; align-items:center; gap:10px; cursor:pointer; flex:1;">
                        <input type="checkbox" ${m.completed ? 'checked' : ''}
                               onchange="toggleMethod(${m.id})"
                               style="width:18px; height:18px; accent-color: var(--primary);">
                        <span class="method-text">${m.text}</span>
                    </label>
                    <button class="btn btn-danger" onclick="deleteMethod(${m.id})">ï¿½â›ï¿½è†„</button>
                </li>
            `).join('');
        }

        function showCelebration(amount) {
            document.getElementById('celebrationAmount').textContent = `èèˆï¿½æ¼¤ï¿½ç…¾ï¿½ãµªï¿½é­T$ ${amount.toLocaleString()}`;
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('celebration').style.display = 'block';
        }

        function closeCelebration() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('celebration').style.display = 'none';
        }

        function saveToStorage() {
            localStorage.setItem('financeGoalPro_v2', JSON.stringify(appData));
        }

        window.addEventListener('load', function() {
            // ï¿½ï¿½ğ¡‘’å¯½éœˆï¿½ï¿½ï¿½ğ¡—é°µï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
            let saved = localStorage.getItem('financeGoalPro_v2');
            
            // æ†’ï¿½ï¿½ï¿½ğ¨€£ï¿½åŸï¿½ã—‡é°µï¿½ï¿½ï¿½ï¿½ï¿½ï¿½è¾·ï¿½ï¿½ï¿½ğ¡‘’å²«éœˆï¿½ï¿½ï¿½ğ¤¥ï¿½ç¾“ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ (ï¿½ã®¾æ‘°å­¤ç¨ï¿½é–’èŠï¿½)
            å¦‚æœ (!saved) {
                saved = localStorage.getItem('financeGoalPro');
                å¦‚æœï¼ˆå·²å„²å­˜ï¼‰{
                    // æ†’ï¿½ï¿½ï¿½ğ¨€£ç³“ï¿½ï¿½ğ¡ƒï¿½ï¿½ï¿½è¾·ï¿½å³•ï¿½ç©ƒï¿½ç©ƒï¿½ï¿½ï¿½é §ã—‡ï¿½å¦ï¿½ğ¦’˜ï¿½åš—ä”¶ï¿½éŠæ»¾â›ï¿½è«¦ï¿½ä»¿ç¾”ï¿½è— 
                    console.log("æ­£åœ¨é·ç§»èˆŠè³‡æ–™...");
                }
            }

            å¦‚æœï¼ˆå·²å„²å­˜ï¼‰{
                appData = JSON.parse(saved);
                document.getElementById('goalName').value = appData.goal.name;
                document.getElementById('targetAmount').value = appData.goal.targetAmount;
                document.getElementById('targetDate').value = appData.goal.targetDate;
                document.getElementById('initialAmount').value = appData.goal.initialAmount;
                
                å¦‚æœ (appData.goal.targetAmount > 0) {
                    updateAll();
                    renderMethods();
                }
            }
        });

        document.getElementById('newMethod').addEventListener('keypress', function(e) {
            å¦‚æœ (e.key === 'Enter') addMethod();
        });
        document.getElementById('transReason').addEventListener('keypress', function(e) {
            å¦‚æœ (e.key === 'Enter') æ–°å¢äº¤æ˜“();
        });
    </script>
</body>
</html>
